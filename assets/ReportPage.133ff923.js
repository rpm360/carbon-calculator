import{u as P,r as h}from"./vendor.4d37f081.js";import{u as $}from"./index.7d4bf778.js";import{C as l,A as z,p as T,b as E,c as I,L as Y,B as L,d as O,e as W,P as H,R as j,i as _,j as t,f as G,g as M,a as o}from"./charts.f21c5eb0.js";import{g as C,c as U,d as B}from"./helpers.420fc8e6.js";import{b as x,a as Z,c as q}from"./cityData.4d64eb23.js";l.register(z,T,E,I,Y,L,O,W,H,j,_);const n={fontFamily:'"-apple-system", "BlinkMacSystemFont", "Segoe UI", "Roboto", "Helvetica Neue", "Arial", sans-serif',fontSize:12,fontColor:"#666",backgroundColor:"#fff",gridColor:"#f0f0f0",tooltipBackgroundColor:"rgba(0, 0, 0, 0.75)",tooltipTitleColor:"#fff",tooltipBodyColor:"#fff",tooltipBorderColor:"rgba(0, 0, 0, 0)",tooltipBorderWidth:0,tooltipCornerRadius:4,tooltipPadding:8,tooltipCaretSize:6,legendPosition:"bottom"};l.defaults.font.family=n.fontFamily;l.defaults.font.size=n.fontSize;l.defaults.color=n.fontColor;l.defaults.plugins.tooltip.backgroundColor=n.tooltipBackgroundColor;l.defaults.plugins.tooltip.titleColor=n.tooltipTitleColor;l.defaults.plugins.tooltip.bodyColor=n.tooltipBodyColor;l.defaults.plugins.tooltip.borderColor=n.tooltipBorderColor;l.defaults.plugins.tooltip.borderWidth=n.tooltipBorderWidth;l.defaults.plugins.tooltip.cornerRadius=n.tooltipCornerRadius;l.defaults.plugins.tooltip.padding=n.tooltipPadding;l.defaults.plugins.tooltip.caretSize=n.tooltipCaretSize;const N=["rgba(76, 175, 80, 0.8)","rgba(33, 150, 243, 0.8)","rgba(255, 152, 0, 0.8)","rgba(156, 39, 176, 0.8)","rgba(0, 188, 212, 0.8)","rgba(233, 30, 99, 0.8)"],k=["rgba(76, 175, 80, 1)","rgba(33, 150, 243, 1)","rgba(255, 152, 0, 1)","rgba(156, 39, 176, 1)","rgba(0, 188, 212, 1)","rgba(233, 30, 99, 1)"],J={user:"rgba(76, 175, 80, 0.8)",city:"rgba(33, 150, 243, 0.8)",country:"rgba(255, 152, 0, 0.8)",average:"rgba(156, 39, 176, 0.8)",global:"rgba(0, 188, 212, 0.8)"},K={user:"rgba(76, 175, 80, 1)",city:"rgba(33, 150, 243, 1)",country:"rgba(255, 152, 0, 1)",average:"rgba(156, 39, 176, 1)",global:"rgba(0, 188, 212, 1)"},Q=({data:s,title:c="Carbon Footprint by Activity"})=>{const e={labels:s.map(i=>C(i.type)),datasets:[{data:s.map(i=>i.value),backgroundColor:N,borderColor:k,borderWidth:2,hoverBorderWidth:3,hoverBorderColor:k,hoverBackgroundColor:N.map(i=>i.replace("0.8","0.9"))}]},p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:n.legendPosition,labels:{padding:20,usePointStyle:!0,pointStyle:"circle"}},title:{display:!0,text:c,font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},tooltip:{callbacks:{label:function(i){const r=i.label||"",u=i.raw||0,m=i.dataset.data.reduce((b,y)=>b+y,0),g=Math.round(u/m*100);return`${r}: ${u.toFixed(2)} kg CO2e (${g}%)`}}}},cutout:"60%",animation:{animateScale:!0,animateRotate:!0}};return t(G,{data:e,options:p})},V=({data:s,title:c="Carbon Emissions Comparison",yAxisLabel:e="kg CO2e"})=>{const p={labels:s.map(r=>r.label),datasets:[{label:e,data:s.map(r=>r.value),backgroundColor:s.map(r=>r.type?J[r.type]:N[0]),borderColor:s.map(r=>r.type?K[r.type]:k[0]),borderWidth:2,borderRadius:6,hoverBorderWidth:3,barThickness:40,maxBarThickness:60}]},i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:c,font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},tooltip:{callbacks:{label:function(r){const u=r.raw||0;return`${e}: ${u.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,grid:{color:n.gridColor,drawBorder:!1},ticks:{padding:10,font:{size:11}},title:{display:!0,text:e,font:{size:13,weight:"normal"},padding:{bottom:10}}},x:{grid:{display:!1,drawBorder:!1},ticks:{padding:10,font:{size:11}}}},animation:{duration:2e3}};return t(M,{data:p,options:i})};const ae=()=>{var F;const s=P(),{activities:c,userData:e,totalEmissions:p}=$(),[i,r]=h.exports.useState(0),[u,m]=h.exports.useState(0),[g,b]=h.exports.useState([]),[y,w]=h.exports.useState(!0),[v,S]=h.exports.useState(x);h.exports.useEffect(()=>{(c.length===0||!e)&&s.push("/")},[c,e,s]),h.exports.useEffect(()=>{if(e!=null&&e.city){const d=Z(e.city);if(r(d.averageFootprint),d.country){const A=q(d.country);m(A),S(A)}}c.length>0&&b(U(c));const a=setTimeout(()=>{w(!1)},1500);return()=>clearTimeout(a)},[c,e]);const f=c.map(a=>({type:a.type,value:a.value*B[a.type]})),R=[{label:"Your Footprint",value:p,type:"user"},{label:`${(e==null?void 0:e.city)||"City"} Average`,value:i,type:"city"},{label:`${(e==null?void 0:e.country)||"Country"} Average`,value:u,type:"country"},{label:"Average Person",value:v,type:"average"},{label:"Global Average",value:x,type:"global"}];return y?o("div",{className:"loading-container",children:[t("div",{className:"loading-spinner"}),t("h2",{children:"Generating Your Carbon Report..."}),t("p",{children:"Analyzing your activities and preparing personalized insights"})]}):o("div",{className:"report-container",children:[o("header",{className:"report-header",children:[t("h1",{children:"Your Carbon Footprint Report"}),o("p",{children:["Based on your activities on ",new Date().toLocaleDateString()]})]}),o("div",{className:"report-content",children:[o("div",{className:"report-summary",children:[o("div",{className:"total-emissions",children:[o("h2",{children:[p.toFixed(2)," kg CO2e"]}),t("p",{children:"Your total carbon emissions"}),t("div",{className:"impact-level",children:p<10?t("span",{className:"low-impact",children:"Low Impact"}):p<20?t("span",{className:"medium-impact",children:"Medium Impact"}):t("span",{className:"high-impact",children:"High Impact"})})]}),o("div",{className:"user-info",children:[o("p",{children:[t("strong",{children:"Email:"})," ",e==null?void 0:e.email]}),(e==null?void 0:e.city)&&o("p",{children:[t("strong",{children:"Location:"})," ",e.city,e.country?`, ${e.country}`:""]})]})]}),o("div",{className:"chart-section",children:[o("div",{className:"chart-container",children:[t("h3",{children:"Emissions by Activity"}),t("div",{className:"pie-chart",children:t(Q,{data:f,title:"Your Carbon Footprint Breakdown"})})]}),o("div",{className:"chart-container",children:[t("h3",{children:"How You Compare"}),t("div",{className:"bar-chart",children:t(V,{data:R,title:"Your Footprint vs. Averages",yAxisLabel:"kg CO2e per day"})})]})]}),o("div",{className:"activities-breakdown",children:[t("h3",{children:"Your Activities"}),t("div",{className:"activities-list",children:c.map(a=>o("div",{className:"activity-item",children:[o("div",{className:"activity-icon",children:[a.type==="driving"&&"\u{1F697}",a.type==="ai_usage"&&"\u{1F916}",a.type==="commute"&&"\u{1F68C}",a.type==="phone"&&"\u{1F4F1}",a.type==="electricity"&&"\u{1F4A1}",a.type==="food"&&"\u{1F354}"]}),o("div",{className:"activity-details",children:[t("h4",{children:C(a.type)}),o("p",{children:[a.value," ",a.unit]})]}),t("div",{className:"activity-impact",children:o("span",{children:[(a.value*B[a.type]).toFixed(2)," kg CO2e"]})})]},a.id))})]}),o("div",{className:"recommendations-section",children:[t("h3",{children:"How to Reduce Your Footprint"}),t("div",{className:"recommendations-list",children:g.map((a,d)=>o("div",{className:"recommendation-item",children:[o("div",{className:"recommendation-header",children:[t("h4",{children:a.title}),o("span",{className:"impact-value",children:["-",a.impact.toFixed(2)," kg CO2e"]})]}),t("p",{children:a.description})]},d))})]}),o("div",{className:"ai-insights",children:[t("h3",{children:"AI-Powered Insights"}),o("div",{className:"insight-content",children:[o("p",{children:["Based on your activity patterns, our AI analysis suggests that your carbon footprint is",p<v?" below":" above"," the average person's footprint",e!=null&&e.city?` in ${e.city}`:"",".",p<v?" Great job! You're already making choices that help the environment.":" There are opportunities to reduce your environmental impact.",(e==null?void 0:e.city)&&` The average person in ${e.city} produces about ${i.toFixed(1)} kg CO2e per day.`,(e==null?void 0:e.country)&&` In ${e.country}, the national average is ${u.toFixed(1)} kg CO2e per day.`]}),o("p",{children:["The biggest contributor to your carbon footprint is",(F=f.sort((a,d)=>d.value-a.value)[0])!=null&&F.type?C(f.sort((a,d)=>d.value-a.value)[0].type):"unknown",". Focusing on reducing this activity would have the most significant impact."]}),o("p",{children:["If you implemented all our recommendations, you could reduce your carbon footprint by approximately"," ",g.reduce((a,d)=>a+d.impact,0).toFixed(2)," kg CO2e."]})]})]}),o("div",{className:"share-section",children:[t("h3",{children:"Share Your Results"}),t("p",{children:"Inspire others to calculate and reduce their carbon footprint"}),o("div",{className:"share-buttons",children:[t("button",{className:"share-btn twitter",children:"Twitter"}),t("button",{className:"share-btn facebook",children:"Facebook"}),t("button",{className:"share-btn email",children:"Email"})]})]}),t("div",{className:"action-buttons",children:t("button",{className:"recalculate-btn",onClick:()=>s.push("/"),children:"Recalculate"})})]})]})};export{ae as default};
//# sourceMappingURL=ReportPage.133ff923.js.map
