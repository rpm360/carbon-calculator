import{r as i,H as O,S as b,R as S,a as C}from"./vendor.4d37f081.js";import{j as o,a as m}from"./charts.f21c5eb0.js";const L=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(t){if(t.ep)return;t.ep=!0;const a=r(t);fetch(t.href,a)}};L();const N="modulepreload",A={},P="/carbon-calculator/",v=function(e,r){return!r||r.length===0?e():Promise.all(r.map(s=>{if(s=`${P}${s}`,s in A)return;A[s]=!0;const t=s.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const n=document.createElement("link");if(n.rel=t?"stylesheet":N,t||(n.as="script",n.crossOrigin=""),n.href=s,document.head.appendChild(n),t)return new Promise((p,h)=>{n.addEventListener("load",p),n.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},I=i.exports.createContext({activities:[],addActivities:()=>{},removeActivity:()=>{},userData:null,setUserData:()=>{},totalEmissions:0,clearData:()=>{}}),u={ACTIVITIES:"carbon_calculator_activities",USER_DATA:"carbon_calculator_user_data",TOTAL_EMISSIONS:"carbon_calculator_total_emissions"},E=(c,e)=>{try{const r=localStorage.getItem(c);return r?JSON.parse(r):e}catch(r){return console.error(`Error loading data from localStorage (${c}):`,r),e}},g=(c,e)=>{try{localStorage.setItem(c,JSON.stringify(e))}catch(r){console.error(`Error saving data to localStorage (${c}):`,r)}},R=({children:c})=>{const[e,r]=i.exports.useState(()=>E(u.ACTIVITIES,[])),[s,t]=i.exports.useState(()=>E(u.USER_DATA,null)),[a,n]=i.exports.useState(()=>E(u.TOTAL_EMISSIONS,0)),p=l=>{const d={driving:.2,ai_usage:.1,commute:.15,phone:.05,electricity:.5,food:2.5};return l.reduce((f,_)=>f+_.value*d[_.type],0)},h=l=>{const d=p(l);n(d),g(u.TOTAL_EMISSIONS,d)};i.exports.useEffect(()=>{g(u.ACTIVITIES,e),h(e)},[e]),i.exports.useEffect(()=>{s&&g(u.USER_DATA,s)},[s]);const y=l=>{const d=[...e,...l];r(d)},T=l=>{const d=e.filter(f=>f.id!==l);r(d)},x=l=>{t(l)},D=()=>{r([]),t(null),n(0),localStorage.removeItem(u.ACTIVITIES),localStorage.removeItem(u.USER_DATA),localStorage.removeItem(u.TOTAL_EMISSIONS)};return o(I.Provider,{value:{activities:e,addActivities:y,removeActivity:T,userData:s,setUserData:x,totalEmissions:a,clearData:D},children:c})},j=()=>i.exports.useContext(I);class $ extends i.exports.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by ErrorBoundary:",e,r)}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:m("div",{className:"error-boundary",children:[o("h2",{children:"Something went wrong."}),m("details",{children:[o("summary",{children:"Error Details"}),o("p",{children:(e=this.state.error)==null?void 0:e.toString()})]}),o("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.href="/"},children:"Go to Home Page"})]}):this.props.children}}const U=({message:c="Loading..."})=>m("div",{className:"loading-container",children:[o("div",{className:"spinner"}),o("p",{className:"loading-message",children:c})]});const w=i.exports.lazy(()=>v(()=>import("./WelcomePage.1c321948.js"),["assets/WelcomePage.1c321948.js","assets/WelcomePage.96d9069f.css","assets/vendor.4d37f081.js","assets/helpers.420fc8e6.js","assets/charts.f21c5eb0.js"])),V=i.exports.lazy(()=>v(()=>import("./AuthPage.9aa99082.js"),["assets/AuthPage.9aa99082.js","assets/AuthPage.346a488a.css","assets/vendor.4d37f081.js","assets/cityData.4d64eb23.js","assets/charts.f21c5eb0.js"])),k=i.exports.lazy(()=>v(()=>import("./ReportPage.133ff923.js"),["assets/ReportPage.133ff923.js","assets/ReportPage.14259e89.css","assets/vendor.4d37f081.js","assets/charts.f21c5eb0.js","assets/helpers.420fc8e6.js","assets/cityData.4d64eb23.js"]));function M(){return o($,{children:o(R,{children:o(O,{children:o("div",{className:"app-container",children:o(i.exports.Suspense,{fallback:o(U,{message:"Loading Carbon Calculator..."}),children:m(b,{children:[o(S,{exact:!0,path:"/",component:w}),o(S,{path:"/auth",component:V}),o(S,{path:"/report",component:k})]})})})})})})}C.exports.render(o(i.exports.StrictMode,{children:o(M,{})}),document.getElementById("root"));export{j as u};
//# sourceMappingURL=index.7d4bf778.js.map
