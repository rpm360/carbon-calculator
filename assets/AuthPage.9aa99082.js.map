{"version":3,"file":"AuthPage.9aa99082.js","sources":["../../src/pages/AuthPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useCarbonData } from '../context/CarbonDataContext';\nimport { getCityData, getCitySuggestions } from '../utils/cityData';\nimport '../styles/AuthPage.css';\n\nconst AuthPage: React.FC = () => {\n  const history = useHistory();\n  const { setUserData, activities, totalEmissions } = useCarbonData();\n  \n  // Form state\n  const [email, setEmail] = useState('');\n  const [city, setCity] = useState('');\n  const [citySuggestions, setCitySuggestions] = useState<string[]>([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [country, setCountry] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [agreeToUpdates, setAgreeToUpdates] = useState(false);\n  \n  const suggestionRef = useRef<HTMLDivElement>(null);\n  const cityInputRef = useRef<HTMLInputElement>(null);\n  \n  // Handle city input change and fetch suggestions\n  useEffect(() => {\n    if (city.length >= 2) {\n      const suggestions = getCitySuggestions(city);\n      setCitySuggestions(suggestions);\n      setShowSuggestions(suggestions.length > 0);\n    } else {\n      setCitySuggestions([]);\n      setShowSuggestions(false);\n    }\n  }, [city]);\n  \n  // Auto-fill country based on city selection\n  const handleCitySelect = (selectedCity: string) => {\n    setCity(selectedCity);\n    const cityData = getCityData(selectedCity);\n    if (cityData.country) {\n      setCountry(cityData.country);\n    }\n    setShowSuggestions(false);\n  };\n  \n  // Close suggestions when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (suggestionRef.current && !suggestionRef.current.contains(event.target as Node) &&\n          cityInputRef.current && !cityInputRef.current.contains(event.target as Node)) {\n        setShowSuggestions(false);\n      }\n    };\n    \n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Handle form submission\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email) {\n      alert('Please enter your email address to continue.');\n      return;\n    }\n    \n    // Show loading state\n    setIsLoading(true);\n    \n    // Simulate API call delay\n    setTimeout(() => {\n      // Save user data to context\n      setUserData({\n        email,\n        city,\n        country\n      });\n      \n      // Navigate to report page\n      history.push('/report');\n    }, 1500);\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <div className=\"auth-card\">\n        <div className=\"auth-header\">\n          <h2>Your Report is Ready!</h2>\n          <div className=\"progress-indicator\">\n            <div className=\"progress-bar\"></div>\n            <p>95% Complete</p>\n          </div>\n        </div>\n        \n        <div className=\"report-preview\">\n          <div className=\"preview-card\">\n            <h3>Your Carbon Footprint</h3>\n            <div className=\"preview-value\">{totalEmissions.toFixed(2)} kg CO2e</div>\n            <p>Based on {activities.length} activities</p>\n            <div className=\"preview-graphic\">\n              <div className=\"preview-icon\">üìä</div>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"benefits-section\">\n          <h3>Unlock Your Full Report</h3>\n          <ul className=\"benefits-list\">\n            <li>\n              <div className=\"benefit-icon\">üîç</div>\n              <div className=\"benefit-text\">\n                <strong>Detailed Analysis</strong>\n                <p>See the breakdown of your carbon footprint by activity</p>\n              </div>\n            </li>\n            <li>\n              <div className=\"benefit-icon\">üèôÔ∏è</div>\n              <div className=\"benefit-text\">\n                <strong>Local Comparison</strong>\n                <p>Compare your impact with others in your city</p>\n              </div>\n            </li>\n            <li>\n              <div className=\"benefit-icon\">üí°</div>\n              <div className=\"benefit-text\">\n                <strong>Personalized Tips</strong>\n                <p>Get AI-powered recommendations to reduce your footprint</p>\n              </div>\n            </li>\n            <li>\n              <div className=\"benefit-icon\">üìà</div>\n              <div className=\"benefit-text\">\n                <strong>Progress Tracking</strong>\n                <p>Monitor your carbon reduction journey over time</p>\n              </div>\n            </li>\n          </ul>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"auth-form\">\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Email Address</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n              placeholder=\"your@email.com\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"city\">City (for better comparisons)</label>\n            <div className=\"autocomplete-container\">\n              <input\n                type=\"text\"\n                id=\"city\"\n                ref={cityInputRef}\n                value={city}\n                onChange={(e) => setCity(e.target.value)}\n                onFocus={() => {\n                  if (city.length >= 2) {\n                    setCitySuggestions(getCitySuggestions(city));\n                    setShowSuggestions(true);\n                  }\n                }}\n                placeholder=\"e.g., New York\"\n                autoComplete=\"off\"\n              />\n              {showSuggestions && citySuggestions.length > 0 && (\n                <div className=\"suggestions-container\" ref={suggestionRef}>\n                  {citySuggestions.map((suggestion, index) => (\n                    <div \n                      key={index} \n                      className=\"suggestion-item\"\n                      onClick={() => handleCitySelect(suggestion)}\n                    >\n                      {suggestion}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"country\">Country</label>\n            <input\n              type=\"text\"\n              id=\"country\"\n              value={country}\n              onChange={(e) => setCountry(e.target.value)}\n              placeholder=\"e.g., United States\"\n              className={city && country ? 'auto-filled' : ''}\n            />\n            {city && country && <div className=\"auto-filled-badge\">Auto-filled</div>}\n          </div>\n          \n          <div className=\"form-checkbox\">\n            <input\n              type=\"checkbox\"\n              id=\"updates\"\n              checked={agreeToUpdates}\n              onChange={(e) => setAgreeToUpdates(e.target.checked)}\n            />\n            <label htmlFor=\"updates\">\n              Send me tips and updates on reducing my carbon footprint\n            </label>\n          </div>\n          \n          <button \n            type=\"submit\" \n            className={`view-report-btn ${isLoading ? 'loading' : ''}`}\n            disabled={isLoading}\n          >\n            {isLoading ? 'Generating Report...' : 'View My Full Report'}\n          </button>\n        </form>\n        \n        <div className=\"privacy-note\">\n          <p>\n            <strong>Privacy Commitment:</strong> We respect your privacy. Your data will only be used \n            to generate your carbon report and will never be shared with third parties.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthPage;\n"],"names":["AuthPage","history","useHistory","setUserData","activities","totalEmissions","useCarbonData","email","setEmail","useState","city","setCity","citySuggestions","setCitySuggestions","showSuggestions","setShowSuggestions","country","setCountry","isLoading","setIsLoading","agreeToUpdates","setAgreeToUpdates","suggestionRef","useRef","cityInputRef","useEffect","length","suggestions","getCitySuggestions","handleCitySelect","selectedCity","cityData","getCityData","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","handleSubmit","e","preventDefault","alert","setTimeout","push","className","children","_jsxs","_jsx","toFixed","onSubmit","htmlFor","type","id","value","onChange","required","placeholder","ref","onFocus","autoComplete","map","suggestion","index","onClick","checked","disabled"],"mappings":"qLAMA,MAAMA,EAAqBA,IAAM,CAC/B,MAAMC,EAAUC,IACV,CAAEC,YAAAA,EAAaC,WAAAA,EAAYC,eAAAA,GAAmBC,EAAc,EAG5D,CAACC,EAAOC,CAAQ,EAAIC,mBAAS,EAAE,EAC/B,CAACC,EAAMC,CAAO,EAAIF,mBAAS,EAAE,EAC7B,CAACG,EAAiBC,CAAkB,EAAIJ,EAAAA,QAAAA,SAAmB,CAAE,CAAA,EAC7D,CAACK,EAAiBC,CAAkB,EAAIN,mBAAS,EAAK,EACtD,CAACO,EAASC,CAAU,EAAIR,mBAAS,EAAE,EACnC,CAACS,EAAWC,CAAY,EAAIV,mBAAS,EAAK,EAC1C,CAACW,EAAgBC,CAAiB,EAAIZ,mBAAS,EAAK,EAEpDa,EAAgBC,iBAAuB,IAAI,EAC3CC,EAAeD,iBAAyB,IAAI,EAGlDE,EAAAA,QAAAA,UAAU,IAAM,CACVf,GAAAA,EAAKgB,QAAU,EAAG,CACdC,MAAAA,EAAcC,EAAmBlB,CAAI,EAC3CG,EAAmBc,CAAW,EACXA,EAAAA,EAAYD,OAAS,CAAC,CAAA,MAEzCb,EAAmB,CAAE,CAAA,EACrBE,EAAmB,EAAK,CAC1B,EACC,CAACL,CAAI,CAAC,EAGHmB,MAAAA,EAAoBC,GAAyB,CACjDnB,EAAQmB,CAAY,EACdC,MAAAA,EAAWC,EAAYF,CAAY,EACrCC,EAASf,SACXC,EAAWc,EAASf,OAAO,EAE7BD,EAAmB,EAAK,CAAA,EAI1BU,EAAAA,QAAAA,UAAU,IAAM,CACRQ,MAAAA,EAAsBC,GAAsB,CAC5CZ,EAAca,SAAW,CAACb,EAAca,QAAQC,SAASF,EAAMG,MAAc,GAC7Eb,EAAaW,SAAW,CAACX,EAAaW,QAAQC,SAASF,EAAMG,MAAc,GAC7EtB,EAAmB,EAAK,CAC1B,EAGOuB,gBAAAA,iBAAiB,YAAaL,CAAkB,EAClD,IAAM,CACFM,SAAAA,oBAAoB,YAAaN,CAAkB,CAAA,CAEhE,EAAG,CAAE,CAAA,EAGCO,MAAAA,EAAgBC,GAAuB,CAG3C,GAFAA,EAAEC,eAAe,EAEb,CAACnC,EAAO,CACVoC,MAAM,8CAA8C,EACpD,MACF,CAGAxB,EAAa,EAAI,EAGjByB,WAAW,IAAM,CAEHzC,EAAA,CACVI,MAAAA,EACAG,KAAAA,EACAM,QAAAA,CAAAA,CACD,EAGDf,EAAQ4C,KAAK,SAAS,GACrB,IAAI,CAAA,EAGT,SACE,MAAA,CAAKC,UAAU,iBAAgBC,WAC7B,MAAA,CAAKD,UAAU,YAAWC,UACxBC,EAAA,MAAA,CAAKF,UAAU,cAAaC,UAC1BE,EAAA,KAAA,CAAAF,SAAI,uBAAA,CAAyB,EAC7BC,EAAA,MAAA,CAAKF,UAAU,qBAAoBC,UACjCE,EAAA,MAAA,CAAKH,UAAU,cAAA,CAAoB,EACnCG,EAAA,IAAA,CAAAF,SAAG,cAAA,CAAe,CAAC,CAAA,CAChB,CAAC,CAAA,CACH,EAELE,EAAA,MAAA,CAAKH,UAAU,iBAAgBC,WAC7B,MAAA,CAAKD,UAAU,eAAcC,UAC3BE,EAAA,KAAA,CAAAF,SAAI,uBAAA,CAAyB,EAC7BC,EAAA,MAAA,CAAKF,UAAU,gBAAeC,SAAA,CAAE1C,EAAe6C,QAAQ,CAAC,EAAE,UAAQ,CAAA,CAAK,EACvEF,EAAA,IAAA,CAAAD,UAAG,YAAU3C,EAAWsB,OAAO,aAAW,CAAA,CAAG,EAC7CuB,EAAA,MAAA,CAAKH,UAAU,kBAAiBC,WAC9B,MAAA,CAAKD,UAAU,eAAcC,SAAC,WAAA,CAAO,CAAA,CAClC,CAAC,CAAA,CACH,CAAA,CACF,EAELC,EAAA,MAAA,CAAKF,UAAU,mBAAkBC,UAC/BE,EAAA,KAAA,CAAAF,SAAI,yBAAA,CAA2B,EAC/BC,EAAA,KAAA,CAAIF,UAAU,gBAAeC,UAC3BC,EAAA,KAAA,CAAAD,UACEE,EAAA,MAAA,CAAKH,UAAU,eAAcC,SAAC,WAAA,CAAO,EACrCC,EAAA,MAAA,CAAKF,UAAU,eAAcC,UAC3BE,EAAA,SAAA,CAAAF,SAAQ,mBAAA,CAAyB,EACjCE,EAAA,IAAA,CAAAF,SAAG,wDAAA,CAAyD,CAAC,CAAA,CAC1D,CAAC,CAAA,CACJ,EACJC,EAAA,KAAA,CAAAD,UACEE,EAAA,MAAA,CAAKH,UAAU,eAAcC,SAAC,iBAAA,CAAQ,EACtCC,EAAA,MAAA,CAAKF,UAAU,eAAcC,UAC3BE,EAAA,SAAA,CAAAF,SAAQ,kBAAA,CAAwB,EAChCE,EAAA,IAAA,CAAAF,SAAG,8CAAA,CAA+C,CAAC,CAAA,CAChD,CAAC,CAAA,CACJ,EACJC,EAAA,KAAA,CAAAD,UACEE,EAAA,MAAA,CAAKH,UAAU,eAAcC,SAAC,WAAA,CAAO,EACrCC,EAAA,MAAA,CAAKF,UAAU,eAAcC,UAC3BE,EAAA,SAAA,CAAAF,SAAQ,mBAAA,CAAyB,EACjCE,EAAA,IAAA,CAAAF,SAAG,yDAAA,CAA0D,CAAC,CAAA,CAC3D,CAAC,CAAA,CACJ,EACJC,EAAA,KAAA,CAAAD,UACEE,EAAA,MAAA,CAAKH,UAAU,eAAcC,SAAC,WAAA,CAAO,EACrCC,EAAA,MAAA,CAAKF,UAAU,eAAcC,UAC3BE,EAAA,SAAA,CAAAF,SAAQ,mBAAA,CAAyB,EACjCE,EAAA,IAAA,CAAAF,SAAG,iDAAA,CAAkD,CAAC,CAAA,CACnD,CAAC,CAAA,CACJ,CAAC,CAAA,CACH,CAAC,CAAA,CACF,EAELC,EAAA,OAAA,CAAMG,SAAUX,EAAcM,UAAU,YAAWC,UACjDC,EAAA,MAAA,CAAKF,UAAU,aAAYC,UACzBE,EAAA,QAAA,CAAOG,QAAQ,QAAOL,SAAC,eAAA,CAAoB,EAC3CE,EAAA,QAAA,CACEI,KAAK,QACLC,GAAG,QACHC,MAAOhD,EACPiD,SAAWf,GAAMjC,EAASiC,EAAEJ,OAAOkB,KAAK,EACxCE,SAAQ,GACRC,YAAY,gBAAA,CACb,CAAC,CAAA,CACC,EAELV,EAAA,MAAA,CAAKF,UAAU,aAAYC,UACzBE,EAAA,QAAA,CAAOG,QAAQ,OAAML,SAAC,+BAAA,CAAoC,EAC1DC,EAAA,MAAA,CAAKF,UAAU,yBAAwBC,UACrCE,EAAA,QAAA,CACEI,KAAK,OACLC,GAAG,OACHK,IAAKnC,EACL+B,MAAO7C,EACP8C,SAAWf,GAAM9B,EAAQ8B,EAAEJ,OAAOkB,KAAK,EACvCK,QAASA,IAAM,CACTlD,EAAKgB,QAAU,IACEE,EAAAA,EAAmBlB,CAAI,CAAC,EAC3CK,EAAmB,EAAI,EAE3B,EACA2C,YAAY,iBACZG,aAAa,KAAA,CACd,EACA/C,GAAmBF,EAAgBc,OAAS,KAC3C,MAAA,CAAKoB,UAAU,wBAAwBa,IAAKrC,EAAcyB,SACvDnC,EAAgBkD,IAAI,CAACC,EAAYC,MAChC,MAAA,CAEElB,UAAU,kBACVmB,QAASA,IAAMpC,EAAiBkC,CAAU,EAAEhB,SAE3CgB,CAAU,EAJNC,CAKF,CACN,CAAA,CACE,CACN,CAAA,CACE,CAAC,CAAA,CACH,EAELhB,EAAA,MAAA,CAAKF,UAAU,aAAYC,UACzBE,EAAA,QAAA,CAAOG,QAAQ,UAASL,SAAC,SAAA,CAAc,EACvCE,EAAA,QAAA,CACEI,KAAK,OACLC,GAAG,UACHC,MAAOvC,EACPwC,SAAWf,GAAMxB,EAAWwB,EAAEJ,OAAOkB,KAAK,EAC1CG,YAAY,sBACZZ,UAAWpC,GAAQM,EAAU,cAAgB,EAC9C,CAAA,EACAN,GAAQM,KAAW,MAAA,CAAK8B,UAAU,oBAAmBC,SAAC,aAAA,CAAgB,CAAC,CAAA,CACrE,EAELC,EAAA,MAAA,CAAKF,UAAU,gBAAeC,UAC5BE,EAAA,QAAA,CACEI,KAAK,WACLC,GAAG,UACHY,QAAS9C,EACToC,SAAWf,GAAMpB,EAAkBoB,EAAEJ,OAAO6B,OAAO,CAAA,CACpD,EACDjB,EAAA,QAAA,CAAOG,QAAQ,UAASL,SAAC,0DAAA,CAElB,CAAC,CAAA,CACL,EAELE,EAAA,SAAA,CACEI,KAAK,SACLP,UAAW,mBAAmB5B,EAAY,UAAY,KACtDiD,SAAUjD,EAAU6B,SAEnB7B,EAAY,uBAAyB,qBAAA,CAChC,CAAC,CAAA,CACL,EAEN+B,EAAA,MAAA,CAAKH,UAAU,eAAcC,WAC3B,IAAA,CAAAA,UACEE,EAAA,SAAA,CAAAF,SAAQ,qBAA2B,CAAA,EAErC,mIAAA,CAAA,CAAG,CAAA,CACA,CAAC,CAAA,CACH,CAAA,CACF,CAET"}